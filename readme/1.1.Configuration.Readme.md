# Configuration of Passage

---

## Config Structure

```mermaid
 graph TD
;
    security.yaml --> config.ts
    config.yaml --> config.ts
    providers.yaml --> config.ts 
```

---

## Providers

### Adding an OIDC Provider

> "OpenID Connect, popularly abbreviated as OIDC, is a protocol that enables different types of applications
> to support authentication and identity management in a secure, centralized, and standardized way. Apps
> based on the OpenID Connect protocol rely on identity providers to handle authentication processes
> for them securely and to verify the identities (i.e., personal attributes) of their users."
> - From the OIDC Handbook by Bruno Krebs of Auth0 (pg. 19)

#### Planning Multiple Authentication Domains

Planning authentication domains is a critical step in the process of adding a new provider.

1. OIDC permits well-known domains for authentication, you can choose one provider per domain, or subdomain, however, >1 OIDC provider cannot live within a single root / domain.
   1. e.g., choose `cstmr.auth.corporate.com` for customer OIDC, and `staff.auth.corporate.com` for staff OIDC.
2. Plan your authentication providers to be able to handle multiple domains (e.g., use stacked providers).

#### Adding the Provider to the `providers.yaml` file

Within the `/config/` directory, modify the `providers.yaml` file.

